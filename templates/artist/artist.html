{% extends "base.html" %}
{% load static %}


<link rel="stylesheet" href="{% static 'css/music_detail.css' %}">
{% block content %}

<div class="content__middle">

  <div class="artist is-verified">

    <div class="artist__header" style="background-image: url('{{ artists.cover_image.url }}');">

      <div class="artist__info">

        <div class="profile__img">

          <img src="{{ artists.image.url }}" />

        </div>

        <div class="artist__info__meta">

          <div class="artist__info__type" style="font-weight: 700; font-size: 12px;">Artist</div>

          <div class="artist__info__name" style="font-size: 72px; font-weight: 900; letter-spacing: -.04em;">{{ artists.pseudonym }}</div>

          <div class="artist__info__actions">

            <button class="button-dark">Play</button>

            <button class="button-light">Follow</button>

            <button class="button-light more">
              <i class="fas fa-heart fa-9x" style="color: #34a247; font-size: 13px; margin-left:6px;"></i>
            </button>

          </div>

        </div>

      </div>

      <div class="artist__listeners">

        <div class="artist__listeners__count">{{ artists.followers|intcomma }}</div>

        <div class="artist__listeners__label">Followers</div>

      </div>

      <div class="artist__navigation">

        <ul class="nav nav-tabs" role="tablist">

          <li role="presentation" class="active">
            <a href="#artist-overview" aria-controls="artist-overview" role="tab" data-toggle="tab">Overview</a>
          </li>

          <li role="presentation">
            <a href="#related-artists" aria-controls="related-artists" role="tab" data-toggle="tab">Related Artists</a>
          </li>

          <!--<li role="presentation">
            <a href="#artist-about" aria-controls="artist-about" role="tab" data-toggle="tab">About</a>
          </li>-->

        </ul>

        <div class="artist__navigation__friends">

          <a href="#">
            <img src="http://zblogged.com/wp-content/uploads/2015/11/17.jpg" alt="" />
          </a>

        </div>

      </div>

    </div>

    <div class="artist__content">

      <div class="tab-content">

        <!-- Overview -->
        <div role="tabpanel" class="tab-pane active" id="artist-overview">

          <div class="overview">

            <div class="overview__artist">

              {% if artists.music.all %}
              {% with latest_music=artists.music.all|first %}
              <div class="section-title">Latest Released</div>

              <a href="{% url "music:detail" latest_music.pk %}">
              <div class="latest-release">

                <div class="latest-release__art">
                  <img src="{{ latest_music.image.url }}" alt="{{ latest_music.name }}" />
                </div>

                <div class="latest-release__song">
                  <div class="latest-release__song__title">{{ latest_music.name }}</div>
                  <div class="latest-release__song__date">
                    <span class="day">{{ latest_music.created_at.day }}</span>
                    <span class="month">{{ latest_music.created_at|date:"F" }}</span>
                    <span class="year">{{ latest_music.created_at.year }}</span>
                  </div>
                </div>
              </div>
              </a>
              {% endwith %}
              {% else %}
              <p>{{ artist.first_name }} {{ artist.last_name }} has not released any songs yet.</p>
              {% endif %}

            </div>

          </div>

        </div>

        <!-- Popular -->
        <div role="tabpanel" class="tab-pane" id="related-artists">

          <div class="tracks">
            {% for song in artists.music.all %}
            <a href="{% url "music:detail" song.pk %}">
            <div class="track">
              <div class="track__art">
                <img src="{{ song.image.url }}" alt="{{ song.name }}" />
              </div>
              <div class="track__number">{{ forloop.counter }}</div>
              <div class="track__added">
                <i class="ion-checkmark-round added"></i>
              </div>
              <div class="track__title">{{ song.name }}</div>
              <div class="track__explicit">
                <span class="label">{{ song.created_at.year }}</span>
              </div>
              <div class="track__plays">{{ song.listens|intcomma }}</div>
            </div>
            </a>
            {% endfor %}
          </div>

          <div class="overview__related">

            <div class="section-title">Related Artists</div>

            <div class="related-artists">

              <!-- Include related artists here -->

            </div>

          </div>

          <div class="overview__albums">

            <div class="overview__albums__head">
              <span class="section-title">Albums</span>
            </div>

            <!-- Include albums here -->

          </div>

        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
